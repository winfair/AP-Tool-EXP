/* file: /apps/style.css */
/* ===== Theme ===== */
:root{
  --bg:#0b0f10;--panel:#0f1416;--panel-2:#12181a;
  --text:#e7f6ef;--muted:#9ccab2;--accent:#29a36a;--accent-2:#2ad199;--danger:#ff6b6b;
  --border:rgba(255,255,255,.10);--border-2:rgba(255,255,255,.16);
  --glass:rgba(15,20,22,.82);--glass-2:rgba(15,20,22,.92);
}
html,body{height:100%;margin:0;background:var(--bg);color:var(--text);-webkit-tap-highlight-color:transparent}
*{box-sizing:border-box}
#map{position:fixed;inset:0;height:100svh;width:100vw}

/* ===== Controls ===== */
.controls{position:fixed;top:env(safe-area-inset-top,12px);left:50%;transform:translateX(-50%);
  display:flex;gap:8px;background:var(--glass);padding:8px 10px;border:1px solid var(--border);
  border-radius:14px;box-shadow:0 10px 30px rgba(0,0,0,.45);z-index:1100;backdrop-filter:blur(6px)}
.btn{appearance:none;border:1px solid var(--border);background:linear-gradient(180deg,rgba(255,255,255,.06),rgba(255,255,255,.02));
  color:var(--text);padding:8px 12px;border-radius:10px;font:600 14px/1 system-ui,-apple-system,Segoe UI,Roboto,sans-serif;cursor:pointer}
.btn.primary{border-color:var(--accent)}
.btn.toggled{outline:2px solid var(--accent)}
.badge{padding:0 8px;border-radius:999px;background:rgba(255,255,255,.08);font-size:12px;margin-left:6px}

/* ===== FABs & Panels ===== */
.fab{position:fixed;right:14px;z-index:1100;width:48px;height:48px;border-radius:16px;
  display:grid;place-items:center;background:var(--glass-2);border:1px solid var(--border)}
.fab.wp{bottom:calc(env(safe-area-inset-bottom,14px) + 64px)}
.fab.gear{bottom:calc(env(safe-area-inset-bottom,14px) + 8px)}
.panel{position:fixed;right:12px;bottom:calc(env(safe-area-inset-bottom,12px) + 128px);
  width:min(92vw,380px);max-height:64vh;overflow:auto;background:var(--glass-2);
  border:1px solid var(--border-2);border-radius:16px;padding:12px;z-index:1050;
  box-shadow:0 16px 40px rgba(0,0,0,.55);display:none}
.panel.open{display:block}
.row{display:grid;gap:8px;margin:10px 0}
.row input,.row button{width:100%;padding:10px 12px;border-radius:10px;border:1px solid var(--border);
  background:rgba(255,255,255,.04);color:var(--text);font:500 14px/1.2 system-ui,sans-serif}
.list{display:grid;gap:8px}
.item{display:grid;grid-template-columns:1fr auto auto auto auto;gap:6px;align-items:center;padding:8px;border:1px solid var(--border);border-radius:10px}
.item small{color:var(--muted);display:block}
.item button{padding:6px 10px}
.item-edit{grid-template-columns:1fr auto auto}
.danger{border-color:var(--danger);color:var(--danger)}

/* ===== HUD ===== */
.info{position:fixed;left:12px;right:12px;bottom:env(safe-area-inset-bottom,12px);background:var(--glass);
  padding:10px 12px;border-radius:14px;font:500 13px/1.25 ui-monospace,SFMono-Regular,Menlo,monospace;color:var(--muted);
  z-index:900;box-shadow:0 10px 30px rgba(0,0,0,.45);backdrop-filter:blur(8px);pointer-events:none;border:1px solid var(--border)}
.info .metrics{display:flex;flex-wrap:wrap;gap:10px 14px;align-items:baseline}
.info .metric{display:flex;gap:6px;align-items:baseline}
.info .metric span{color:var(--muted);font:600 12px/1 system-ui}
.info .metric .value{color:var(--text);font:700 15px/1 ui-monospace;letter-spacing:.2px}

/* ===== Popups / Tooltips ===== */
.leaflet-popup-content{font:500 13px/1.3 system-ui,-apple-system,Segoe UI,Roboto,sans-serif;color:var(--text)}
.floating-popup .leaflet-popup-content-wrapper{background:var(--glass-2);border:1px solid var(--border-2);backdrop-filter:blur(8px);border-radius:12px;box-shadow:0 10px 24px rgba(0,0,0,.45)}
.floating-popup .leaflet-popup-tip{background:var(--glass-2);border:1px solid var(--border-2)}
.floating-popup .leaflet-popup-content{margin:10px 12px}
.popup-grid{display:grid;gap:8px}
.popup-actions{display:flex;gap:8px;justify-content:flex-end}
.popup-actions .btn{padding:6px 10px;font-size:13px}
.popup-input{width:100%;padding:8px;border-radius:10px;border:1px solid var(--border);background:rgba(255,255,255,.06);color:var(--text);font:500 13px/1}
.popup-coords{color:var(--muted);font-size:12px}
.mini-label{background:var(--glass);color:var(--text);padding:2px 6px;border:1px solid var(--border);border-radius:8px;font:600 12px/1 system-ui;backdrop-filter:blur(4px);pointer-events:none}

/* ===== Alignment Banner ===== */
.align-banner{position:fixed;top:calc(env(safe-area-inset-top,12px) + 58px);left:50%;transform:translateX(-50%);
  z-index:1150;background:var(--glass-2);border:1px solid var(--border-2);border-radius:12px;padding:8px 12px;
  font:600 13px/1 system-ui,-apple-system,Segoe UI,Roboto,sans-serif;color:var(--text);
  box-shadow:0 10px 30px rgba(0,0,0,.45);backdrop-filter:blur(6px);display:block}
.align-name.unstable{color:var(--muted)}
.align-banner.pulse{outline:2px solid var(--accent);box-shadow:0 0 0 0 rgba(41,163,106,.55);animation:pulse .6s ease}
@keyframes pulse{to{outline-color:transparent;box-shadow:0 0 0 20px rgba(41,163,106,0)}}

/* ===== Map accents ===== */
.dot-pin{border-radius:50%;background:var(--panel-2);border:2px solid var(--accent);box-shadow:0 4px 12px rgba(0,0,0,.45)}
.guide-hit{filter:drop-shadow(0 0 6px #ff4444)}
.leaflet-control-attribution,.leaflet-control-zoom{filter:drop-shadow(0 6px 12px rgba(0,0,0,.35))}
.leaflet-container a{color:var(--muted)}
.leaflet-map-pane{will-change:transform}

/* ===== Settings extracted styles ===== */
.settings-grid{display:grid;gap:8px}
.settings-label{font:600 13px/1 system-ui}
.settings-note{color:var(--muted);font-size:12px}
.settings-value{font:600 12px/1 ui-monospace}

/* ===== Generic small grids (used in edit UI) ===== */
.grid-6{display:grid;gap:6px}
.grid-2col{display:grid;grid-template-columns:1fr 1fr;gap:6px}
